<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Martin Dokholyan</title>
    <style>
        body {
            font-family: "Courier New", monospace;
            background-color: #ffffff;
            color: #000000;
            padding: 20px;
        }

        nav {
            margin-bottom: 20px;
            background: #c0c0c0;
            padding: 10px;
            border: 2px outset #888;
            text-align: center;
        }

        nav a {
            color: #0000ee;
            text-decoration: underline;
            margin: 0 10px;
            font-weight: bold;
            cursor: pointer;
        }

        nav a.active {
            background: #ffffff;
            padding: 2px 6px;
        }

        #content {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
        }

        .content-box {
            border: 2px solid #000;
            padding: 20px;
            background: #f8f8f8;
            position: relative;
            overflow: hidden;
        }

        .content-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 25% 25%, #ff00ff 2px, transparent 2px),
                radial-gradient(circle at 75% 75%, #00ffff 2px, transparent 2px),
                radial-gradient(circle at 25% 75%, #ffff00 2px, transparent 2px),
                radial-gradient(circle at 75% 25%, #ff00ff 2px, transparent 2px);
            background-size: 20px 20px, 25px 25px, 30px 30px, 35px 35px;
            background-position: 0 0, 10px 10px, 5px 15px, 15px 5px;
            opacity: 0.1;
            animation: pixelMove 8s linear infinite;
            pointer-events: none;
            z-index: 1;
        }

        .content-box > * {
            position: relative;
            z-index: 2;
        }

        @keyframes pixelMove {
            0% { transform: translate(0, 0); }
            25% { transform: translate(-5px, -5px); }
            50% { transform: translate(5px, -5px); }
            75% { transform: translate(-5px, 5px); }
            100% { transform: translate(0, 0); }
        }

        .loading {
            text-align: center;
            padding: 40px;
            font-style: italic;
        }
    </style>
</head>
<body>
    <nav>
        <a href="#" onclick="loadTab('intro')" class="active" id="intro-tab">Intro</a>
        <a href="#" onclick="loadTab('telos')" id="telos-tab">τέλος</a>
        <a href="#" onclick="loadTab('brain')" id="brain-tab">Brain</a>
        <a href="#" onclick="loadTab('widgets')" id="widgets-tab">Widgets</a>
    </nav>

    <div id="content">
        <div class="content-box">
            <div class="loading">Loading...</div>
        </div>
    </div>

    <script>
        let currentTab = 'intro';

        // Content for each tab stored as template strings
        const tabContent = {
            intro: `
                <div class="content-box">
                    <style>
                        .intro-content {
                            display: flex;
                            gap: 20px;
                            align-items: flex-start;
                        }

                        .photo {
                            width: 250px;
                            max-height: 300px;
                            background: #ddd;
                            border: 1px solid #000;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-size: 14px;
                            overflow: hidden;
                        }

                        .photo img {
                            max-width: 100%;
                            max-height: 100%;
                            width: auto;
                            height: auto;
                            object-fit: contain;
                            display: block;
                            margin: 0 auto;
                        }

                        .info h1 {
                            font-size: 20px;
                            margin-bottom: 10px;
                            font-weight: bold;
                        }

                        .info p {
                            font-size: 14px;
                            margin-bottom: 6px;
                        }

                        @media (max-width: 600px) {
                            .intro-content {
                                flex-direction: column;
                                text-align: center;
                            }

                            .photo {
                                margin: 0 auto;
                            }
                        }
                    </style>

                    <div class="intro-content">
                        <div class="photo">
                            <img src="unnamed.jpg" alt="Martin Dokholyan" onerror="this.style.display='none'; this.parentElement.innerHTML='Photo';">
                        </div>
                        <div class="info">
                            <h1>Martin Dokholyan</h1>
                            <p>RA @ MIT & Student @ BU</p>
                            <p>I am interested in exploring the logic of the brain and how it can orchestrate behavior and perception from the senses.</p>
                            <p>How is our internal state defined?</p>
                            <p>How does memory work and how does it influence our internal state?</p>
                            <p>What influence does our internal state have on sensory processing?</p>
                            <p>How does the brain "filter" different sensory modalities in different situations to guide our attention?</p>
                            <p>Is it possible to predict ones actions or behaviors from only neural activity?</p>
                            <p>I hope to identify the principles that govern how organisms sense, act, and adapt to guide our understanding of reality.</p>
                            <p style="color: #222;">Last Edited: 10/5/2025</p>
                        </div>
                    </div>
                </div>
            `,
            
            telos: `
                <div class="content-box">
                    <style>
                        h2 {
                            font-size: 18px;
                            margin-bottom: 15px;
                            font-weight: bold;
                        }

                        p {
                            font-size: 14px;
                            margin-bottom: 10px;
                            line-height: 1.4;
                        }
                    </style>

                    <h2>τέλος</h2>
                    <p>"Pleasure and pain moreover supply the motives of desire and of avoidance, and the springs of conduct generally. This being so, it clearly follows that actions are right and praiseworthy only as being a means to the attainment of a life of pleasure. But that which is not itself a means to anything else, but to which all else is a means, is what the Greeks term the Telos, the highest, ultimate or final Good. It must therefore be admitted that the Chief Good is to live <b>agreeably</b>."</p>
                    <p><b>Cicero</b> - On the ends of good and evil</p>
                    <p>“I am. I am, I exist, I think, therefore I am; I am because I think, why do I think? I don't want to think any more, I am because I think that I don't want to be, I think that I . . . because . . . ugh!”</p>
                    <p><b>Jean-Paul Sartre</b> - Nausea</p>
                    <p>“Haven't you noticed that opinion without knowledge is always a poor thing? At the best it is blind—isn't anyone who holds a true opinion without understanding like a blind man on the right road?”</p>
                    <p><b>Plato</b> - The Republic</p>
                    <!-- Embedded YouTube video -->
                    <div style="margin: 30px 0; text-align: center;">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/tGJYSIBETho" title="YouTube video player" style="border:none;" allowfullscreen></iframe>
                    </div>
                    <p>"One morning, as Gregor Samsa was waking up from anxious dreams, he discovered that in his bed he had been changed into a monstrous bug…"</p>
                    <p><b>Franz Kafka</b> - The Metamorphosis</p>
                    <p>"Everything that burns, everything that rips me apart, I want to suffer with my body. I'd rather have a hundred wounds, whips, poisons - than this kind of suffering in the head, this phantom of suffering, which touches me softly and caresses me without ever really hurting."</p>
                    <p><b>Jean-Paul Sartre</b> - No Exit</p>
                </div>
            `,

            brain: `
                <div class="content-box">
                    <div class="loading">Loading brain content...</div>
                </div>
            `,
            
            widgets: `
                <div class="content-box">
                    <style>
                        .widget {
                            margin-top: 30px;
                            padding: 10px;
                            background: #f0f0f0;
                            border: 1px solid #000;
                        }

                        .widget:first-child {
                            margin-top: 0;
                        }

                        .widget h3 {
                            font-size: 16px;
                            margin-bottom: 8px;
                            border-bottom: 1px dashed #000;
                            padding-bottom: 4px;
                        }

                        .calculator-grid {
                            display: grid;
                            grid-template-columns: repeat(4, 1fr);
                            gap: 5px;
                            margin-top: 10px;
                        }

                        .calc-display {
                            grid-column: span 4;
                            padding: 8px;
                            background: #fff;
                            border: 1px solid #000;
                            text-align: right;
                            font-family: monospace;
                        }

                        .calc-btn {
                            padding: 10px;
                            font-size: 14px;
                            background: #e0e0e0;
                            border: 1px solid #000;
                            cursor: pointer;
                        }

                        .calc-btn.equals {
                            background: #000;
                            color: #0f0;
                        }

                        .calc-btn.wide {
                            grid-column: span 2;
                        }

                        .calc-btn.tall {
                            grid-row: span 2;
                        }

                        .clock {
                            text-align: center;
                            font-size: 24px;
                            font-family: monospace;
                            background: #000;
                            color: #00ff00;
                            padding: 10px;
                            margin-top: 10px;
                        }

                        .canvas {
                            border: 1px solid #000;
                            margin-top: 10px;
                        }

                        .canvas-controls {
                            margin-top: 10px;
                        }

                        .canvas-controls label,
                        .canvas-controls button {
                            font-size: 12px;
                            margin-right: 10px;
                        }

                        .counter-widget {
                            text-align: center;
                            margin-top: 10px;
                        }

                        .counter-display {
                            font-size: 24px;
                            margin: 10px 0;
                            font-family: monospace;
                        }

                        .counter-btn {
                            background: #ddd;
                            border: 1px solid #000;
                            padding: 5px 10px;
                            cursor: pointer;
                            margin: 2px;
                            font-size: 14px;
                        }
                    </style>

                    <div class="widget">
                        <h3>🧮 Calculator</h3>
                        <div class="calculator-grid">
                            <div class="calc-display" id="calc-display">0</div>
                            <button class="calc-btn" onclick="clearCalc()">C</button>
                            <button class="calc-btn" onclick="calcInput('/')">/</button>
                            <button class="calc-btn" onclick="calcInput('*')">×</button>
                            <button class="calc-btn" onclick="deleteLast()">⌫</button>
                            <button class="calc-btn" onclick="calcInput('7')">7</button>
                            <button class="calc-btn" onclick="calcInput('8')">8</button>
                            <button class="calc-btn" onclick="calcInput('9')">9</button>
                            <button class="calc-btn" onclick="calcInput('-')">-</button>
                            <button class="calc-btn" onclick="calcInput('4')">4</button>
                            <button class="calc-btn" onclick="calcInput('5')">5</button>
                            <button class="calc-btn" onclick="calcInput('6')">6</button>
                            <button class="calc-btn" onclick="calcInput('+')">+</button>
                            <button class="calc-btn" onclick="calcInput('1')">1</button>
                            <button class="calc-btn" onclick="calcInput('2')">2</button>
                            <button class="calc-btn" onclick="calcInput('3')">3</button>
                            <button class="calc-btn equals tall" onclick="calculate()">=</button>
                            <button class="calc-btn wide" onclick="calcInput('0')">0</button>
                            <button class="calc-btn" onclick="calcInput('.')">.</button>
                        </div>
                    </div>

                    <div class="widget">
                        <h3>🕒 Live Clock</h3>
                        <div class="clock" id="clock">00:00:00</div>
                    </div>

                    <div class="widget">
                        <h3>✏️ Drawing Canvas</h3>
                        <canvas class="canvas" id="canvas" width="400" height="200"></canvas>
                        <div class="canvas-controls">
                            <button onclick="clearCanvas()">Clear</button>
                            <label>Color: <input type="color" id="brush-color" value="#000000"></label>
                            <label>Size: <input type="range" id="brush-size" min="1" max="10" value="3"></label>
                        </div>
                    </div>

                    <div class="widget">
                        <h3>🔢 Counter</h3>
                        <div class="counter-widget">
                            <div class="counter-display" id="counter-display">0</div>
                            <div class="counter-buttons">
                                <button class="counter-btn" onclick="changeCounter(-10)">-10</button>
                                <button class="counter-btn" onclick="changeCounter(-1)">-1</button>
                                <button class="counter-btn" onclick="resetCounter()">Reset</button>
                                <button class="counter-btn" onclick="changeCounter(1)">+1</button>
                                <button class="counter-btn" onclick="changeCounter(10)">+10</button>
                            </div>
                        </div>
                    </div>
                </div>
            `
        };

        function loadTab(tabName) {
            // Update active tab styling
            document.querySelectorAll('nav a').forEach(link => link.classList.remove('active'));
            document.getElementById(tabName + '-tab').classList.add('active');

            // Load the content
            document.getElementById('content').innerHTML = tabContent[tabName];

            // Special handling for brain tab - load from external file
            if (tabName === 'brain') {
                fetch('brain.html')
                    .then(response => response.text())
                    .then(html => {
                        // Extract the body content from the brain.html file
                        const parser = new DOMParser();
                        const doc = parser.parseFromString(html, 'text/html');
                        const brainContent = doc.body.innerHTML;
                        
                        document.getElementById('content').innerHTML = `
                            <div class="content-box">
                                ${brainContent}
                            </div>
                        `;
                        
                        // Add styles from brain.html to current document
                        const styles = doc.querySelectorAll('style');
                        styles.forEach(style => {
                            const newStyle = document.createElement('style');
                            newStyle.textContent = style.textContent;
                            document.head.appendChild(newStyle);
                        });
                        
                        // Initialize brain functionality directly
                        initializeBrainTab();
                    })
                    .catch(error => {
                        console.error('Error loading brain content:', error);
                        document.getElementById('content').innerHTML = `
                            <div class="content-box">
                                <p>Error loading brain content. Please make sure brain.html exists.</p>
                            </div>
                        `;
                    });
            }

            // If it's the widgets tab, initialize the widgets
            if (tabName === 'widgets') {
                initializeWidgets();
            }

            currentTab = tabName;
        }

        function initializeWidgets() {
            // Reset widget variables
            window.calcExpression = '';
            window.counterValue = 0;
            window.isDrawing = false;

            // Initialize clock
            updateClock();
            setInterval(updateClock, 1000);

            // Initialize canvas
            initCanvas();
        }

        function initializeBrainTab() {
            // Brain region information
            const brainRegions = {
                's1-cortex': {
                    name: "Primary Somatosensory Cortex (S1)",
                    function: "Processes touch, pressure, temperature, and pain sensations from the body. Contains a topographic 'body map' where different areas respond to specific body parts."
                },
                'm1-cortex': {
                    name: "Primary Motor Cortex (M1)",
                    function: "Controls voluntary movements. Sends direct commands to muscles via the corticospinal tract. Also organized as a body map with larger areas for precise movements like whiskers and forepaws."
                },
                'visual-cortex': {
                    name: "Primary Visual Cortex (V1)",
                    function: "First cortical area to process visual information. Detects edges, orientation, and motion. Critical for basic visual perception and feeds information to higher visual areas."
                },
                'auditory-cortex': {
                    name: "Primary Auditory Cortex (A1)",
                    function: "Processes sound frequency, intensity, and temporal patterns. Organized tonotopically with different areas responding to specific frequencies. Essential for sound localization."
                },
                'prefrontal-cortex': {
                    name: "Prefrontal Cortex (PFC)",
                    function: "Executive control center for decision-making, working memory, and behavioral flexibility. Plans future actions and inhibits inappropriate responses."
                },
                'cingulate-cortex': {
                    name: "Cingulate Cortex",
                    function: "Involved in emotion regulation, attention, and pain processing. The anterior portion processes emotional conflict while posterior areas handle spatial attention."
                },
                'insular-cortex': {
                    name: "Insular Cortex",
                    function: "Integrates sensory information with emotional and cognitive states. Processes taste, visceral sensations, and social emotions like empathy and disgust."
                },
                'piriform-cortex': {
                    name: "Piriform Cortex",
                    function: "Primary olfactory cortex that processes smell information directly from the olfactory bulb. Creates odor representations and associations."
                },
                'entorhinal-cortex': {
                    name: "Entorhinal Cortex",
                    function: "Gateway between hippocampus and neocortex. Contains grid cells that provide spatial coordinate system for navigation. Critical for memory formation."
                },
                'retrosplenial-cortex': {
                    name: "Retrosplenial Cortex",
                    function: "Processes spatial navigation and contextual memory. Integrates visual landmarks with spatial maps and supports episodic memory retrieval."
                },
                hippocampus: {
                    name: "Hippocampus",
                    function: "Memory consolidation and spatial navigation. Contains place cells that create cognitive maps. Essential for forming new episodic memories and spatial learning tasks."
                },
                'dentate-gyrus': {
                    name: "Dentate Gyrus",
                    function: "Part of hippocampal formation that performs pattern separation. Creates distinct representations of similar experiences to avoid memory interference."
                },
                subiculum: {
                    name: "Subicular Complex",
                    function: "Output structure of hippocampus that processes spatial and temporal information. Connects hippocampus to other brain regions for memory consolidation."
                },
                'vp-thalamus': {
                    name: "Ventral Posterior Thalamus",
                    function: "Relays somatosensory information from body to cortex. Processes touch, pressure, and proprioceptive signals before sending to S1 cortex."
                },
                'vl-thalamus': {
                    name: "Ventral Lateral Thalamus",
                    function: "Motor relay nucleus that receives input from cerebellum and basal ganglia. Sends processed motor information to motor cortex."
                },
                lgn: {
                    name: "Lateral Geniculate Nucleus",
                    function: "Visual relay nucleus in thalamus. Processes retinal input and sends organized visual information to primary visual cortex."
                },
                mgn: {
                    name: "Medial Geniculate Nucleus",
                    function: "Auditory relay nucleus that processes sound information from inferior colliculus before sending to auditory cortex."
                },
                pvn: {
                    name: "Paraventricular Nucleus (PVN)",
                    function: "Stress response center. Releases CRH to trigger cortisol release and controls autonomic responses to threats. Key in fight-or-flight reactions."
                },
                scn: {
                    name: "Suprachiasmatic Nucleus (SCN)",
                    function: "Master circadian clock. Synchronizes daily rhythms in body temperature, hormone release, and sleep-wake cycles based on light input."
                },
                arcuate: {
                    name: "Arcuate Nucleus",
                    function: "Appetite control center. Contains neurons that sense hunger (AgRP) and satiety (POMC) signals. Regulates food intake and energy balance."
                },
                'lateral-hyp': {
                    name: "Lateral Hypothalamus",
                    function: "Feeding and arousal center. Stimulation causes eating behavior. Also involved in reward processing and motivated behaviors like foraging."
                },
                vmh: {
                    name: "Ventromedial Hypothalamus",
                    function: "Satiety center that signals fullness after eating. Also regulates glucose metabolism and defensive behaviors like aggression."
                },
                dmh: {
                    name: "Dorsomedial Hypothalamus",
                    function: "Regulates circadian rhythms, stress responses, and feeding behavior. Connects SCN timing signals to other hypothalamic areas."
                },
                mammillary: {
                    name: "Mammillary Bodies",
                    function: "Part of memory circuit connecting hippocampus to thalamus. Important for spatial memory and recollective aspects of episodic memory."
                },
                'caudate-putamen': {
                    name: "Caudate-Putamen (Dorsal Striatum)",
                    function: "Motor control and habit formation. Processes action-outcome learning and develops automatic behavioral sequences. Important for skill learning."
                },
                accumbens: {
                    name: "Nucleus Accumbens (Ventral Striatum)",
                    function: "Reward and motivation center. Processes dopamine signals related to pleasure and addiction. Drives goal-directed behaviors and reinforcement learning."
                },
                'globus-pallidus': {
                    name: "Globus Pallidus",
                    function: "Output nucleus of basal ganglia that regulates movement. Inhibits unwanted movements and allows desired actions to proceed."
                },
                subthalamic: {
                    name: "Subthalamic Nucleus",
                    function: "Excitatory nucleus in basal ganglia circuit. Loss of function leads to uncontrolled movements as seen in Huntington's disease."
                },
                'substantia-nigra': {
                    name: "Substantia Nigra",
                    function: "Contains dopamine neurons that modulate movement and reward. Degeneration here causes Parkinson's disease motor symptoms."
                },
                bla: {
                    name: "Basolateral Amygdala",
                    function: "Emotional learning center that forms associations between stimuli and outcomes. Critical for fear conditioning and reward learning."
                },
                'central-amygdala': {
                    name: "Central Amygdala",
                    function: "Output nucleus that triggers fear responses. Activates autonomic and behavioral responses to threats through brainstem connections."
                },
                'medial-amygdala': {
                    name: "Medial Amygdala",
                    function: "Processes social and pheromonal information. Important for social recognition, mating behaviors, and territorial responses."
                },
                midbrain: {
                    name: "Midbrain",
                    function: "Contains structures for visual/auditory reflexes, arousal, and reward processing. Houses dopamine neurons and controls eye movements."
                },
                pons: {
                    name: "Pons",
                    function: "Relays information between cerebellum and cortex. Contains nuclei for sleep, arousal, and facial sensation. Critical for REM sleep."
                },
                medulla: {
                    name: "Medulla Oblongata",
                    function: "Controls vital functions like breathing, heart rate, and blood pressure. Contains reflexes for swallowing, coughing, and vomiting."
                },
                'superior-colliculus': {
                    name: "Superior Colliculus",
                    function: "Controls eye movements and orienting responses to visual stimuli. Creates maps of visual space for directing attention and gaze."
                },
                'inferior-colliculus': {
                    name: "Inferior Colliculus",
                    function: "Major auditory processing center that integrates sound information. Processes sound localization and frequency before sending to thalamus."
                },
                pag: {
                    name: "Periaqueductal Gray",
                    function: "Pain modulation and defensive behaviors. Produces analgesia during stress and coordinates fight-or-flight responses to threats."
                },
                vta: {
                    name: "Ventral Tegmental Area",
                    function: "Source of dopamine for reward and motivation circuits. Neurons here respond to unexpected rewards and drive learning and addiction."
                },
                'locus-coeruleus': {
                    name: "Locus Coeruleus",
                    function: "Primary source of norepinephrine in brain. Regulates arousal, attention, and stress responses. Active during wakefulness and vigilance."
                },
                raphe: {
                    name: "Raphe Nuclei",
                    function: "Source of serotonin throughout brain. Regulates mood, sleep, appetite, and impulse control. Target of antidepressant medications."
                },
                'cerebellar-cortex': {
                    name: "Cerebellar Cortex",
                    function: "Motor learning and coordination. Fine-tunes movements through error correction. Also involved in cognitive functions and timing."
                },
                'deep-cerebellar': {
                    name: "Deep Cerebellar Nuclei",
                    function: "Output of cerebellum that sends corrective signals to motor areas. Integrates information from cerebellar cortex for movement control."
                },
                olfactory: {
                    name: "Olfactory Bulb",
                    function: "First processing station for smell. Receives direct input from nose receptors. Critical for mice - used for navigation, mate recognition, and predator detection."
                },
                'olfactory-tubercle': {
                    name: "Olfactory Tubercle",
                    function: "Part of reward system that responds to pleasant odors. Links smell to motivation and connects olfaction to limbic circuits."
                },
                septum: {
                    name: "Septum",
                    function: "Modulates hippocampal activity and theta rhythms. Involved in social behavior, aggression, and reward processing."
                },
                bnst: {
                    name: "Bed Nucleus of Stria Terminalis",
                    function: "Extended amygdala region that processes sustained fear and anxiety. Responds to long-term threats and stress hormones."
                },
                habenula: {
                    name: "Habenula",
                    function: "Processes negative reward prediction errors. Becomes active when expected rewards don't occur, contributing to depression and addiction."
                },
                pineal: {
                    name: "Pineal Gland",
                    function: "Produces melatonin hormone that regulates sleep-wake cycles. Responds to light/dark information from SCN to control circadian rhythms."
                },
                'choroid-plexus': {
                    name: "Choroid Plexus",
                    function: "Produces cerebrospinal fluid that cushions brain and removes waste products. Forms blood-brain barrier to protect neural tissue."
                },
                spinal: {
                    name: "Spinal Cord",
                    function: "Information highway between brain and body. Carries motor commands down and sensory information up. Contains reflex circuits for rapid responses."
                }
            };

            // Add click listeners to brain regions
            Object.keys(brainRegions).forEach(regionId => {
                const region = document.getElementById(regionId);
                if (region) {
                    region.addEventListener('click', () => {
                        // Remove highlight from all regions
                        document.querySelectorAll('.brain-region').forEach(r => {
                            r.classList.remove('highlighted');
                        });
                        
                        // Highlight clicked region
                        region.classList.add('highlighted');
                        
                        // Update info panel
                        const info = brainRegions[regionId];
                        document.getElementById('brain-info').innerHTML = `
                            <div class="region-name">${info.name}</div>
                            <div class="region-function">${info.function}</div>
                        `;
                    });
                }
            });
        }

        // Widget functions (moved from original file)
        function calcInput(value) {
            const display = document.getElementById('calc-display');
            if (window.calcExpression === '0' || window.calcExpression === 'Error') {
                window.calcExpression = '';
            }
            window.calcExpression += value;
            display.textContent = window.calcExpression || '0';
        }

        function clearCalc() {
            window.calcExpression = '';
            document.getElementById('calc-display').textContent = '0';
        }

        function deleteLast() {
            window.calcExpression = window.calcExpression.slice(0, -1);
            document.getElementById('calc-display').textContent = window.calcExpression || '0';
        }

        function calculate() {
            const display = document.getElementById('calc-display');
            try {
                const result = eval(window.calcExpression.replace('×', '*'));
                window.calcExpression = result.toString();
                display.textContent = window.calcExpression;
            } catch (e) {
                display.textContent = 'Error';
                window.calcExpression = 'Error';
            }
        }

        function updateClock() {
            const now = new Date();
            const time = now.toLocaleTimeString();
            const clockElement = document.getElementById('clock');
            if (clockElement) {
                clockElement.textContent = time;
            }
        }

        function initCanvas() {
            const canvas = document.getElementById('canvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');

            canvas.addEventListener('mousedown', (e) => {
                window.isDrawing = true;
                draw(e);
            });

            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', () => window.isDrawing = false);
            canvas.addEventListener('mouseout', () => window.isDrawing = false);

            function draw(e) {
                if (!window.isDrawing) return;

                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;

                ctx.lineWidth = document.getElementById('brush-size').value;
                ctx.lineCap = 'round';
                ctx.strokeStyle = document.getElementById('brush-color').value;

                ctx.lineTo(x, y);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(x, y);
            }
        }

        function clearCanvas() {
            const canvas = document.getElementById('canvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.beginPath();
        }

        function changeCounter(amount) {
            window.counterValue += amount;
            document.getElementById('counter-display').textContent = window.counterValue;
        }

        function resetCounter() {
            window.counterValue = 0;
            document.getElementById('counter-display').textContent = window.counterValue;
        }

        // Load intro tab by default
        document.addEventListener('DOMContentLoaded', function() {
            loadTab('intro');
        });
    </script>
</body>
</html>
